<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= guild.name %> - ุงูุฅุนุฏุงุฏุงุช</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body class="dark-bg">
<%- include('partials/header', { user, botAvatar: botAvatar || '', isOwner: isOwner || false }) %>

<div class="guild-layout">
  <aside class="sidebar">
    <div class="sidebar-guild">
      <img src="<%= guild.icon %>" alt="<%= guild.name %>" class="sidebar-guild-icon">
      <div>
        <h3><%= guild.name %></h3>
        <p><%= guild.memberCount.toLocaleString() %> ุนุถู</p>
        <% if (settings.premium) { %><span class="badge-premium">๐ Premium</span><% } %>
      </div>
    </div>
    <nav class="sidebar-nav">
      <a href="#" class="sidebar-link active" onclick="showTab('general',this)"><i class="fas fa-cog"></i> ุนุงู</a>
      <a href="#" class="sidebar-link" onclick="showTab('commands',this)"><i class="fas fa-terminal"></i> ุงูุฃูุงูุฑ</a>
      <a href="#" class="sidebar-link" onclick="showTab('welcome',this)"><i class="fas fa-door-open"></i> ุชุฑุญูุจ</a>
      <a href="#" class="sidebar-link" onclick="showTab('autoreply',this)"><i class="fas fa-comment-dots"></i> ุฑุฏ ุชููุงุฆู</a>
      <a href="#" class="sidebar-link" onclick="showTab('ai',this)"><i class="fas fa-robot"></i> ุฐูุงุก ุงุตุทูุงุนู</a>
      <a href="#" class="sidebar-link" onclick="showTab('protection',this)"><i class="fas fa-shield-alt"></i> ุญูุงูุฉ</a>
      <a href="#" class="sidebar-link" onclick="showTab('logs',this)"><i class="fas fa-scroll"></i> ุงูููุฌ</a>
      <a href="#" class="sidebar-link" onclick="showTab('moderation',this)"><i class="fas fa-gavel"></i> ุฅุดุฑุงู</a>
      <a href="#" class="sidebar-link" onclick="showTab('tax',this)"><i class="fas fa-coins"></i> ุถุฑูุจุฉ</a>
      <a href="#" class="sidebar-link" onclick="showTab('suggestions',this)"><i class="fas fa-lightbulb"></i> ุงูุชุฑุงุญุงุช</a>
      <a href="#" class="sidebar-link" onclick="showTab('feedback',this)"><i class="fas fa-comments"></i> ุขุฑุงุก</a>
      <a href="#" class="sidebar-link" onclick="showTab('azkar',this)"><i class="fas fa-moon"></i> ุฃุฐูุงุฑ</a>
      <a href="#" class="sidebar-link" onclick="showTab('ticket',this)"><i class="fas fa-ticket-alt"></i> ุชูุช</a>
      <a href="#" class="sidebar-link premium-link" onclick="showTab('premium',this)"><i class="fas fa-crown"></i> Premium</a>
      <a href="/dashboard" class="sidebar-link back-link"><i class="fas fa-arrow-right"></i> ุฑุฌูุน</a>
    </nav>
  </aside>

  <main class="guild-content">
    <div id="toast" class="toast hidden"></div>

    <!-- TAB: GENERAL -->
    <div id="tab-general" class="tab-content active">
      <div class="tab-header"><h2><i class="fas fa-cog"></i> ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ</h2></div>
      <div class="settings-card">
        <h3>๐ค ุงูุจุฑูููุณ</h3>
        <div class="input-row">
          <input type="text" id="prefix" value="<%= settings.prefix %>" maxlength="5" class="input-field" placeholder="!">
          <button onclick="saveSection('general',{prefix:document.getElementById('prefix').value})" class="btn-save">๐พ ุญูุธ</button>
        </div>
      </div>
      <div class="settings-card">
        <h3>๐ ูุนูููุงุช ุงูุณูุฑูุฑ</h3>
        <div class="info-grid">
          <div class="info-item"><span>ุงูุงุณู</span><strong><%= guild.name %></strong></div>
          <div class="info-item"><span>ุงูุฃุนุถุงุก</span><strong><%= guild.memberCount.toLocaleString() %></strong></div>
          <div class="info-item"><span>ุงูุฑููุงุช</span><strong><%= guild.channels.length %></strong></div>
          <div class="info-item"><span>ุงูุฑุชุจ</span><strong><%= guild.roles.length %></strong></div>
          <div class="info-item"><span>ุงูุจุฑููููู</span><strong><%= settings.premium ? '๐ ููุนูู' : 'โ ุบูุฑ ููุนูู' %></strong></div>
        </div>
      </div>
    </div>

    <!-- TAB: COMMANDS -->
    <div id="tab-commands" class="tab-content">
      <div class="tab-header">
        <h2><i class="fas fa-terminal"></i> ุฅุนุฏุงุฏุงุช ุงูุฃูุงูุฑ</h2>
        <p class="tab-desc">ุฎุตูุต ุงูุฃูุงูุฑ ูุฃุถู ุงุฎุชุตุงุฑุงุช ููู ุฃูุฑ</p>
      </div>

      <!-- ุงูุจุฑูููุณ -->
      <div class="settings-card">
        <h3>๐ค ุงูุจุฑูููุณ</h3>
        <p class="settings-desc">ุงูุจุฑูููุณ ุงูุญุงูู: <code id="prefix-display"><%= settings.prefix %></code></p>
        <div class="input-row">
          <input type="text" id="cmd_prefix" value="<%= settings.prefix %>" maxlength="5" class="input-field" placeholder="!">
          <button onclick="saveSection('general',{prefix:document.getElementById('cmd_prefix').value}).then(()=>{document.getElementById('prefix-display').textContent=document.getElementById('cmd_prefix').value})" class="btn-save">๐พ ุญูุธ</button>
        </div>
      </div>

      <!-- ุงุฎุชุตุงุฑุงุช ุงูุฃูุงูุฑ ุงูุนุงูุฉ -->
      <div class="settings-card">
        <h3>๐ง ุงุฎุชุตุงุฑุงุช ุงูุฃูุงูุฑ ุงูุนุงูุฉ</h3>
        <p class="settings-desc">ุญุฏุฏ ุงุฎุชุตุงุฑุงู ููู ุฃูุฑ - ูุดุชุบู ูุน ุงูุฃูุฑ ุงูุฃุตูู ุฃู ุจุฏูู</p>
        <div class="shortcuts-grid">
          <% const generalCmds = [
            {key:'help',    emoji:'๐', desc:'ูุงุฆูุฉ ุงูุฃูุงูุฑ'},
            {key:'ping',    emoji:'๐', desc:'ุณุฑุนุฉ ุงูุจูุช'},
            {key:'server',  emoji:'๐', desc:'ูุนูููุงุช ุงูุณูุฑูุฑ'},
            {key:'user',    emoji:'๐ค', desc:'ูุนูููุงุช ุนุถู'},
            {key:'avatar',  emoji:'๐ผ๏ธ', desc:'ุตูุฑุฉ ุนุถู'},
            {key:'tax',     emoji:'๐ฐ', desc:'ุญุณุงุจ ุงูุถุฑูุจุฉ'},
          ] %>
          <% generalCmds.forEach(c => { %>
          <div class="shortcut-item-multi">
            <div class="shortcut-info">
              <span class="cmd-emoji"><%= c.emoji %></span>
              <div>
                <strong><code><%= settings.prefix %><%= c.key %></code></strong>
                <small><%= c.desc %></small>
              </div>
            </div>
            <div class="shortcut-aliases">
              <% for(let i=1; i<=10; i++) { %>
              <input type="text"
                id="sc_<%= c.key %>_<%= i %>"
                value="<%= (settings['sc_'+c.key+'_'+i]) || '' %>"
                class="alias-input"
                placeholder="ุงุณู <%= i %>">
              <% } %>
            </div>
          </div>
          <% }) %>
        </div>
        <button onclick="saveAliases(['help','ping','server','user','avatar','tax'])" class="btn-save" style="margin-top:1rem">๐พ ุญูุธ ุฃุณูุงุก ุงูุนุงูุฉ</button>
      </div>

      <!-- ุงุฎุชุตุงุฑุงุช ุฃูุงูุฑ ุงูุฅุดุฑุงู -->
      <div class="settings-card">
        <h3>โ๏ธ ุงุฎุชุตุงุฑุงุช ุฃูุงูุฑ ุงูุฅุดุฑุงู</h3>
        <p class="settings-desc">ุงุฎุชุตุงุฑุงุช ุชุดุชุบู ุจููุณ ุตูุงุญูุงุช ุงูุฃูุฑ ุงูุฃุตูู</p>
        <div class="shortcuts-grid">
          <% const modCmds = [
            {key:'ban',    emoji:'๐จ', desc:'ุญุธุฑ ุนุถู'},
            {key:'unban',  emoji:'๐', desc:'ุฑูุน ุงูุญุธุฑ'},
            {key:'kick',   emoji:'๐', desc:'ุทุฑุฏ ุนุถู'},
            {key:'mute',   emoji:'๐', desc:'ุชุงูู ุฃูุช'},
            {key:'unmute', emoji:'๐', desc:'ุฑูุน ุงูุชุงูู ุฃูุช'},
            {key:'clear',  emoji:'๐๏ธ', desc:'ุญุฐู ุฑุณุงุฆู'},
            {key:'lock',   emoji:'๐', desc:'ููู ุงูุฑูู'},
            {key:'unlock', emoji:'๐', desc:'ูุชุญ ุงูุฑูู'},
            {key:'hide',   emoji:'๐๏ธ', desc:'ุฅุฎูุงุก ุงูุฑูู'},
            {key:'unhide', emoji:'โ', desc:'ุฅุธูุงุฑ ุงูุฑูู'},
            {key:'say',    emoji:'๐ฌ', desc:'ุฅุฑุณุงู ุฑุณุงูุฉ'},
            {key:'come',   emoji:'๐ฉ', desc:'ุงุณุชุฏุนุงุก ุนุถู'},
          ] %>
          <% modCmds.forEach(c => { %>
          <div class="shortcut-item-multi">
            <div class="shortcut-info">
              <span class="cmd-emoji"><%= c.emoji %></span>
              <div>
                <strong><code><%= settings.prefix %><%= c.key %></code></strong>
                <small><%= c.desc %></small>
              </div>
            </div>
            <div class="shortcut-aliases">
              <% for(let i=1; i<=10; i++) { %>
              <input type="text"
                id="sc_<%= c.key %>_<%= i %>"
                value="<%= (settings['sc_'+c.key+'_'+i]) || '' %>"
                class="alias-input"
                placeholder="ุงุณู <%= i %>">
              <% } %>
            </div>
          </div>
          <% }) %>
        </div>
        <button onclick="saveAliases(['ban','unban','kick','mute','unmute','clear','lock','unlock','hide','unhide','say','come'])" class="btn-save" style="margin-top:1rem">๐พ ุญูุธ ุฃุณูุงุก ุงูุฅุดุฑุงู</button>
      </div>

      <!-- ุฃูุงูุฑ ูุฎุตุตุฉ -->
      <div class="settings-card">
        <h3>โจ ุฃูุงูุฑ ูุฎุตุตุฉ</h3>
        <p class="settings-desc">ุฃุถู ุฃูุงูุฑ ุฎุงุตุฉ ุจุณูุฑูุฑู - ููุง ุญุฏ ููุชุจ ุงูุฃูุฑ ุงูุจูุช ูุฑุฏ ุจุฑุณุงูุฉ ูุญุฏุฏุฉ</p>
        <div class="input-row" style="gap:0.5rem;flex-wrap:wrap">
          <input type="text" id="custom_cmd" class="input-field" placeholder="ุงุณู ุงูุฃูุฑ (ุจุฏูู ุจุฑูููุณ)" style="flex:1;min-width:120px">
          <input type="text" id="custom_reply" class="input-field" placeholder="ุงูุฑุฏ..." style="flex:2;min-width:180px">
          <button onclick="addCustomCmd()" class="btn-save">โ ุฅุถุงูุฉ</button>
        </div>
        <div id="custom-cmds-list" style="margin-top:1rem">
          <% const customCmds = settings.custom_cmds || []; %>
          <% if(customCmds.length === 0) { %>
            <p class="empty-text">ูุง ุชูุฌุฏ ุฃูุงูุฑ ูุฎุตุตุฉ ุจุนุฏ</p>
          <% } else { %>
            <% customCmds.forEach((c,i) => { %>
            <div class="reply-item" id="cc_<%= i %>">
              <div class="reply-info">
                <span class="reply-word"><%= settings.prefix %><%= c.cmd %></span>
                <span class="reply-arrow">โ</span>
                <span class="reply-text"><%= c.reply %></span>
              </div>
              <button onclick="removeCustomCmd('<%= c.cmd %>')" class="btn-sm-danger">๐๏ธ</button>
            </div>
            <% }) %>
          <% } %>
        </div>
      </div>

      <!-- ุฅุฑุณุงู ุฑุณุงูุฉ -->
      <div class="settings-card">
        <h3>๐ค ุฅุฑุณุงู ุฑุณุงูุฉ ูู ุงูุฏุงุดุจูุฑุฏ</h3>
        <div class="form-group">
          <label>๐ข ุงูุฑูู</label>
          <select id="test_channel" class="select-field">
            <% guild.channels.forEach(ch => { %><option value="<%= ch.id %>">#<%= ch.name %></option><% }) %>
          </select>
        </div>
        <div class="form-group">
          <label>๐ฌ ุงูุฑุณุงูุฉ</label>
          <input type="text" id="test_message" class="input-field" placeholder="ุงูุชุจ ุฑุณุงูุชู ููุง...">
        </div>
        <button onclick="doAction('send_message',{channelId:document.getElementById('test_channel').value,message:document.getElementById('test_message').value})" class="btn-save">๐ค ุฅุฑุณุงู</button>
      </div>
    </div>

    <!-- TAB: WELCOME -->
    <div id="tab-welcome" class="tab-content">
        <p class="tab-desc">ูุฏุนู: {user} {username} {server} {count} {id}</p>
      </div>
      <div class="settings-card">
        <h3>๐ ุฑุณุงูุฉ ุงูุชุฑุญูุจ</h3>
        <div class="form-group">
          <label>๐ข ุฑูู ุงูุชุฑุญูุจ</label>
          <select id="welcome_channel" class="select-field">
            <option value="">-- ุงุฎุชุฑ ุฑูู --</option>
            <% guild.channels.forEach(ch => { %>
              <option value="<%= ch.id %>" <%= settings.welcome_channel === ch.id ? 'selected' : '' %>>#<%= ch.name %></option>
            <% }) %>
          </select>
        </div>
        <div class="form-group">
          <label>๐ฌ ุฑุณุงูุฉ ุงูุชุฑุญูุจ</label>
          <textarea id="welcome_message" class="textarea-field" rows="4" placeholder="ูุฑุญุจุงู {user} ูู {server}!"><%= settings.welcome_message %></textarea>
        </div>
        <div class="form-group">
          <label>๐ผ๏ธ ุตูุฑุฉ ุงูุชุฑุญูุจ (ุฑุงุจุท ุงุฎุชูุงุฑู)</label>
          <input type="url" id="welcome_image" value="<%= settings.welcome_image %>" class="input-field" placeholder="https://...">
        </div>
        <div class="form-group">
          <label>๐ญ ุฑุชุจุฉ ุชููุงุฆูุฉ ุนูุฏ ุงูุฏุฎูู</label>
          <select id="welcome_role" class="select-field">
            <option value="">-- ุจุฏูู ุฑุชุจุฉ --</option>
            <% guild.roles.forEach(r => { %>
              <option value="<%= r.id %>" <%= settings.welcome_role === r.id ? 'selected' : '' %>><%= r.name %></option>
            <% }) %>
          </select>
        </div>
        <button onclick="saveSection('welcome',{
          welcome_channel: document.getElementById('welcome_channel').value,
          welcome_message: document.getElementById('welcome_message').value,
          welcome_image: document.getElementById('welcome_image').value,
          welcome_role: document.getElementById('welcome_role').value
        })" class="btn-save">๐พ ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุชุฑุญูุจ</button>
      </div>
      <div class="settings-card">
        <h3>๐ ุฑุณุงูุฉ ุงููุฏุงุน</h3>
        <div class="form-group">
          <label>๐ข ุฑูู ุงููุฏุงุน</label>
          <select id="leave_channel" class="select-field">
            <option value="">-- ุจุฏูู --</option>
            <% guild.channels.forEach(ch => { %>
              <option value="<%= ch.id %>" <%= settings.leave_channel === ch.id ? 'selected' : '' %>>#<%= ch.name %></option>
            <% }) %>
          </select>
        </div>
        <div class="form-group">
          <label>๐ฌ ุฑุณุงูุฉ ุงููุฏุงุน</label>
          <textarea id="leave_message" class="textarea-field" rows="3" placeholder="ูุฏุงุนุงู {username}!"><%= settings.leave_message %></textarea>
        </div>
        <button onclick="saveSection('welcome',{
          leave_channel: document.getElementById('leave_channel').value,
          leave_message: document.getElementById('leave_message').value
        })" class="btn-save">๐พ ุญูุธ ุฅุนุฏุงุฏุงุช ุงููุฏุงุน</button>
      </div>
    </div>

    <!-- TAB: AUTO-REPLY -->
    <div id="tab-autoreply" class="tab-content">
      <div class="tab-header"><h2><i class="fas fa-comment-dots"></i> ูุธุงู ุงูุฑุฏ ุงูุชููุงุฆู</h2></div>
      <div class="settings-card">
        <h3>โ ุฅุถุงูุฉ ุฑุฏ ุชููุงุฆู</h3>
        <div class="form-group">
          <label>๐ค ุงููููุฉ / ุงูุฌููุฉ</label>
          <input type="text" id="ar_word" class="input-field" placeholder="ูุซุงู: ูุฑุญุจุง">
        </div>
        <div class="form-group">
          <label>๐ฌ ุงูุฑุฏ</label>
          <input type="text" id="ar_reply" class="input-field" placeholder="ูุซุงู: ูุนูููู ุงูุณูุงู!">
        </div>
        <button onclick="addAutoReply()" class="btn-save">โ ุฅุถุงูุฉ</button>
      </div>
      <div class="settings-card">
        <h3>๐ ุงูุฑุฏูุฏ ุงูุญุงููุฉ (<span id="reply-count"><%= settings.auto_replys.length %></span>)</h3>
        <div id="replies-list">
          <% if (settings.auto_replys.length === 0) { %>
            <p class="empty-text">ูุง ููุฌุฏ ุฑุฏูุฏ ุชููุงุฆูุฉ ุจุนุฏ. ุฃุถู ุฃูู ุฑุฏ!</p>
          <% } else { %>
            <% settings.auto_replys.forEach(r => { %>
              <div class="reply-item" id="reply-<%= r.word %>">
                <div class="reply-info">
                  <span class="reply-word">๐ค "<%= r.word %>"</span>
                  <span class="reply-arrow">โ</span>
                  <span class="reply-text"><%= r.reply %></span>
                </div>
                <button onclick="removeAutoReply('<%= r.word.replace(/'/g, "\\'") %>')" class="btn-sm-danger">๐๏ธ</button>
              </div>
            <% }) %>
          <% } %>
        </div>
      </div>
    </div>

    <!-- TAB: AI -->
    <div id="tab-ai" class="tab-content">
      <div class="tab-header">
        <h2><i class="fas fa-robot"></i> ุงูุฐูุงุก ุงูุงุตุทูุงุนู</h2>
        <p class="tab-desc">ุฎุตุต ุฑููุงู ูุฑุฏ ููู ุงูุจูุช ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู ุนูู ุงูุฑุณุงุฆู</p>
      </div>
      <div class="settings-card">
        <h3>๐ค ุฅุนุฏุงุฏ ุฑูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู</h3>
        <div class="form-group">
          <label>๐ข ุฑูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู</label>
          <select id="ai_channel" class="select-field">
            <option value="">-- ุงุฎุชุฑ ุฑูู --</option>
            <% guild.channels.forEach(ch => { %>
              <option value="<%= ch.id %>" <%= settings.ai_channel === ch.id ? 'selected' : '' %>>#<%= ch.name %></option>
            <% }) %>
          </select>
        </div>
        <div class="toggle-item">
          <div class="toggle-info">
            <span class="toggle-icon">๐ค</span>
            <div>
              <strong>ุชูุนูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู</strong>
              <small>ุงูุจูุช ุณูุฑุฏ ุชููุงุฆูุงู ุนูู ูู ุฑุณุงุฆู ุงูุฑูู ุงููุญุฏุฏ</small>
            </div>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="ai_enabled" <%= settings.ai_enabled ? 'checked' : '' %>>
            <span class="toggle-slider"></span>
          </label>
        </div>
        <button onclick="saveSection('ai',{
          ai_channel: document.getElementById('ai_channel').value,
          ai_enabled: document.getElementById('ai_enabled').checked
        })" class="btn-save mt-4">๐พ ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู</button>
      </div>
      <div class="settings-card">
        <h3>โน๏ธ ูุนูููุงุช</h3>
        <p>โข ุงูุจูุช ุณูุฑุฏ ุนูู <strong>ูู ุฑุณุงูุฉ</strong> ูู ุงูุฑูู ุงููุญุฏุฏ</p>
        <p>โข ูููู ุฃูุถุงู ุฅุนุฏุงุฏู ุจุงูุฃูุฑ <code>/setup-ai</code></p>
        <p>โข ุงูุฑุฏูุฏ ุจุงููุบุฉ ุงูุนุฑุจูุฉ ุจุดูู ุงูุชุฑุงุถู</p>
      </div>
    </div>

    <!-- TAB: PROTECTION -->
    <div id="tab-protection" class="tab-content">
      <div class="tab-header">
        <h2><i class="fas fa-shield-alt"></i> ูุธุงู ุงูุญูุงูุฉ</h2>
        <p class="tab-desc">โ๏ธ ุชุฃูุฏ ุฃู ุฑุชุจุฉ ุงูุจูุช ุฃุนูู ุฑุชุจุฉ ูู ุงูุณูุฑูุฑ</p>
      </div>
      <div class="settings-card">
        <h3>๐ง ุฑูู ุณุฌู ุงูุญูุงูุฉ</h3>
        <select id="protect_log" class="select-field">
          <option value="">-- ุจุฏูู ุณุฌู --</option>
          <% guild.channels.forEach(ch => { %>
            <option value="<%= ch.id %>" <%= settings.protect_log === ch.id ? 'selected' : '' %>>#<%= ch.name %></option>
          <% }) %>
        </select>
      </div>
      <div class="settings-card">
        <h3>๐ก๏ธ ุฃูุธูุฉ ุงูุญูุงูุฉ</h3>
        <div class="toggles-grid">
          <% const protections = [
            {id:'anti_server_edit', icon:'๐', label:'ุญูุงูุฉ ุงูุณูุฑูุฑ', desc:'ููุน ุชุบููุฑ ุงุณู/ุตูุฑุฉ ุงูุณูุฑูุฑ'},
            {id:'anti_channel_edit', icon:'๐', label:'ุญูุงูุฉ ุงูุฑููุงุช', desc:'ููุน ุญุฐู/ุชุนุฏูู ุงูุฑููุงุช'},
            {id:'anti_channel_create', icon:'๐ซ', label:'ููุน ุฅูุดุงุก ุฑููุงุช', desc:'ุจุงูุฏ ูู ููุดุฆ ุฑูู'},
            {id:'anti_role_create', icon:'๐ญ', label:'ููุน ุฅูุดุงุก ุฑุชุจ', desc:'ุจุงูุฏ ูู ููุดุฆ ุฑุชุจุฉ'},
            {id:'anti_role_edit', icon:'โ๏ธ', label:'ุญูุงูุฉ ุชุนุฏูู ุงูุฑุชุจ', desc:'ููุน ุชุบููุฑ ุตูุงุญูุงุช ุงูุฑุชุจ'},
            {id:'anti_kick', icon:'๐', label:'ููุน ุงูููู ุงูุฌูุงุนู', desc:'ุจุงูุฏ ูู ูููู ุฃูุซุฑ ูู 3'},
            {id:'anti_ban', icon:'๐จ', label:'ููุน ุงูุจุงู ุงูุฌูุงุนู', desc:'ุจุงูุฏ ูู ูุจุงู ุฃูุซุฑ ูู 3'},
            {id:'anti_bots', icon:'๐ค', label:'ููุน ุฅุถุงูุฉ ุจูุชุงุช', desc:'ุทุฑุฏ ุฃู ุจูุช ููุถุงู'},
            {id:'anti_webhook', icon:'๐ช', label:'ููุน ุงูููุจ ูููุณ', desc:'ุญุฐู ุฃู webhook ูููุดุฃ'},
          ] %>
          <% protections.forEach(p => { %>
            <div class="toggle-item">
              <div class="toggle-info">
                <span class="toggle-icon"><%= p.icon %></span>
                <div>
                  <strong><%= p.label %></strong>
                  <small><%= p.desc %></small>
                </div>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" id="<%= p.id %>" <%= settings[p.id] ? 'checked' : '' %>>
                <span class="toggle-slider"></span>
              </label>
            </div>
          <% }) %>
        </div>
        <button onclick="saveProtection()" class="btn-save mt-4">๐พ ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุญูุงูุฉ</button>
      </div>
    </div>

    <!-- TAB: LOGS -->
    <div id="tab-logs" class="tab-content">
      <div class="tab-header">
        <h2><i class="fas fa-scroll"></i> ุณุฌูุงุช ุงูููุฌ</h2>
      </div>
      <div class="settings-card">
        <div class="logs-grid">
          <% const logTypes = [
            {key:'messagedelete',label:'ุญุฐู ุฑุณุงุฆู',icon:'๐๏ธ'},
            {key:'messageupdate',label:'ุชุนุฏูู ุฑุณุงุฆู',icon:'โ๏ธ'},
            {key:'rolecreate',label:'ุฅูุดุงุก ุฑุชุจุฉ',icon:'๐'},
            {key:'roledelete',label:'ุญุฐู ุฑุชุจุฉ',icon:'โ'},
            {key:'rolegive',label:'ุฅุนุทุงุก ุฑุชุจุฉ',icon:'โ'},
            {key:'roleremove',label:'ุฅุฒุงูุฉ ุฑุชุจุฉ',icon:'โ'},
            {key:'channelcreate',label:'ุฅูุดุงุก ุฑูู',icon:'๐ข'},
            {key:'channeldelete',label:'ุญุฐู ุฑูู',icon:'๐๏ธ'},
            {key:'banadd',label:'ุจุงูุฏ ุนุถู',icon:'๐จ'},
            {key:'bandelete',label:'ุฑูุน ุจุงูุฏ',icon:'๐'},
            {key:'kickadd',label:'ููู ุนุถู',icon:'๐'},
            {key:'botadd',label:'ุฅุถุงูุฉ ุจูุช',icon:'๐ค'},
          ] %>
          <% logTypes.forEach(lt => { %>
            <div class="log-item">
              <label><%= lt.icon %> <%= lt.label %></label>
              <select id="log_<%= lt.key %>" class="select-field-sm">
                <option value="">-- ุจุฏูู --</option>
                <% guild.channels.forEach(ch => { %>
                  <option value="<%= ch.id %>" <%= settings['log_'+lt.key] === ch.id ? 'selected' : '' %>>#<%= ch.name %></option>
                <% }) %>
              </select>
            </div>
          <% }) %>
        </div>
        <button onclick="saveLogs()" class="btn-save mt-4">๐พ ุญูุธ ุณุฌูุงุช ุงูููุฌ</button>
      </div>
    </div>

    <!-- TAB: MODERATION -->
    <div id="tab-moderation" class="tab-content">
      <div class="tab-header"><h2><i class="fas fa-gavel"></i> ุฅุฏุงุฑุฉ ูุฅุดุฑุงู</h2></div>

      <div class="settings-card">
        <h3>๐ข ุฅุฑุณุงู ุฑุณุงูุฉ</h3>
        <div class="form-group">
          <label>ุงูุฑูู</label>
          <select id="send_channel" class="select-field">
            <% guild.channels.forEach(ch => { %><option value="<%= ch.id %>">#<%= ch.name %></option><% }) %>
          </select>
        </div>
        <div class="form-group">
          <label>ุงูุฑุณุงูุฉ</label>
          <textarea id="send_message" class="textarea-field" placeholder="ุงูุชุจ ุฑุณุงูุชู ููุง..."></textarea>
        </div>
        <button onclick="doAction('send_message',{channelId:document.getElementById('send_channel').value,message:document.getElementById('send_message').value})" class="btn-save">๐ค ุฅุฑุณุงู</button>
      </div>

      <div class="settings-card <%= settings.premium ? '' : 'premium-card' %>">
        <% if (!settings.premium) { %><div class="premium-overlay-card">๐ Premium ูุทููุจ</div><% } %>
        <h3>๐จ ุจุงูุฏ ุนุถู</h3>
        <div class="form-group"><label>ID ุงูุนุถู</label><input type="text" id="ban_user" class="input-field" placeholder="123456789..."></div>
        <div class="form-group"><label>ุงูุณุจุจ</label><input type="text" id="ban_reason" class="input-field" placeholder="ุณุจุจ ุงูุจุงูุฏ"></div>
        <button onclick="doAction('ban_user',{userId:document.getElementById('ban_user').value,reason:document.getElementById('ban_reason').value})" class="btn-danger">๐จ ุจุงูุฏ</button>
      </div>

      <div class="settings-card <%= settings.premium ? '' : 'premium-card' %>">
        <% if (!settings.premium) { %><div class="premium-overlay-card">๐ Premium ูุทููุจ</div><% } %>
        <h3>๐ ููู ุนุถู</h3>
        <div class="form-group"><label>ID ุงูุนุถู</label><input type="text" id="kick_user" class="input-field" placeholder="123456789..."></div>
        <div class="form-group"><label>ุงูุณุจุจ</label><input type="text" id="kick_reason" class="input-field" placeholder="ุณุจุจ ุงูููู"></div>
        <button onclick="doAction('kick_user',{userId:document.getElementById('kick_user').value,reason:document.getElementById('kick_reason').value})" class="btn-danger">๐ ููู</button>
      </div>

      <div class="settings-card <%= settings.premium ? '' : 'premium-card' %>">
        <% if (!settings.premium) { %><div class="premium-overlay-card">๐ Premium ูุทููุจ</div><% } %>
        <h3>๐ ุฑูุน ุจุงูุฏ</h3>
        <div class="form-group"><label>ID ุงูุนุถู</label><input type="text" id="unban_user" class="input-field" placeholder="123456789..."></div>
        <button onclick="doAction('unban_user',{userId:document.getElementById('unban_user').value})" class="btn-save">๐ ุฑูุน ุงูุจุงูุฏ</button>
      </div>

      <div class="settings-card">
        <h3>๐ ููู / ูุชุญ ุฑูู</h3>
        <div class="form-group">
          <label>ุงูุฑูู</label>
          <select id="mod_channel" class="select-field">
            <% guild.channels.forEach(ch => { %><option value="<%= ch.id %>">#<%= ch.name %></option><% }) %>
          </select>
        </div>
        <div class="btn-row">
          <button onclick="doAction('lock_channel',{channelId:document.getElementById('mod_channel').value})" class="btn-danger">๐ ููู</button>
          <button onclick="doAction('unlock_channel',{channelId:document.getElementById('mod_channel').value})" class="btn-save">๐ ูุชุญ</button>
        </div>
      </div>
    </div>

    <!-- TAB: TAX -->
    <div id="tab-tax" class="tab-content">
      <div class="tab-header"><h2><i class="fas fa-coins"></i> ูุธุงู ุงูุถุฑูุจุฉ</h2></div>
      <div class="settings-card">
        <div class="form-group">
          <label>๐ฐ ุฑูู ุงูุถุฑูุจุฉ ุงูุชููุงุฆูุฉ</label>
          <select id="tax_room" class="select-field">
            <option value="">-- ุจุฏูู --</option>
            <% guild.channels.forEach(ch => { %><option value="<%= ch.id %>" <%= settings.tax_room === ch.id ? 'selected' : '' %>>#<%= ch.name %></option><% }) %>
          </select>
        </div>
        <div class="form-group">
          <label>๐จ ุดูู ุงูุนุฑุถ</label>
          <select id="tax_mode" class="select-field">
            <option value="embed" <%= settings.tax_mode==='embed'?'selected':'' %>>Embed</option>
            <option value="text" <%= settings.tax_mode==='text'?'selected':'' %>>ูุต ุนุงุฏู</option>
          </select>
        </div>
        <button onclick="saveSection('tax',{tax_room:document.getElementById('tax_room').value,tax_mode:document.getElementById('tax_mode').value})" class="btn-save">๐พ ุญูุธ</button>
      </div>
    </div>

    <!-- TAB: SUGGESTIONS -->
    <div id="tab-suggestions" class="tab-content">
      <div class="tab-header"><h2><i class="fas fa-lightbulb"></i> ูุธุงู ุงูุงูุชุฑุงุญุงุช</h2></div>
      <div class="settings-card">
        <div class="form-group">
          <label>๐ก ุฑูู ุงูุงูุชุฑุงุญุงุช</label>
          <select id="suggestions_room" class="select-field">
            <option value="">-- ุจุฏูู --</option>
            <% guild.channels.forEach(ch => { %><option value="<%= ch.id %>" <%= settings.suggestions_room===ch.id?'selected':'' %>>#<%= ch.name %></option><% }) %>
          </select>
        </div>
        <div class="form-group">
          <label>๐จ ููุน ุงูุชูุงุนู</label>
          <select id="suggestion_mode" class="select-field">
            <option value="buttons" <%= settings.suggestion_mode==='buttons'?'selected':'' %>>ุฃุฒุฑุงุฑ</option>
            <option value="reactions" <%= settings.suggestion_mode==='reactions'?'selected':'' %>>ุชูุงุนูุงุช</option>
          </select>
        </div>
        <button onclick="saveSection('suggestions',{suggestions_room:document.getElementById('suggestions_room').value,suggestion_mode:document.getElementById('suggestion_mode').value})" class="btn-save">๐พ ุญูุธ</button>
      </div>
    </div>

    <!-- TAB: FEEDBACK -->
    <div id="tab-feedback" class="tab-content">
      <div class="tab-header"><h2><i class="fas fa-comments"></i> ูุธุงู ุงูุขุฑุงุก</h2></div>
      <div class="settings-card">
        <div class="form-group">
          <label>๐ญ ุฑูู ุงูุขุฑุงุก</label>
          <select id="feedback_room" class="select-field">
            <option value="">-- ุจุฏูู --</option>
            <% guild.channels.forEach(ch => { %><option value="<%= ch.id %>" <%= settings.feedback_room===ch.id?'selected':'' %>>#<%= ch.name %></option><% }) %>
          </select>
        </div>
        <div class="form-group">
          <label>๐จ ููุน ุงูุฑุฏ</label>
          <select id="feedback_mode" class="select-field">
            <option value="embed" <%= settings.feedback_mode==='embed'?'selected':'' %>>Embed</option>
            <option value="reactions" <%= settings.feedback_mode==='reactions'?'selected':'' %>>ุชูุงุนูุงุช</option>
          </select>
        </div>
        <button onclick="saveSection('feedback',{feedback_room:document.getElementById('feedback_room').value,feedback_mode:document.getElementById('feedback_mode').value})" class="btn-save">๐พ ุญูุธ</button>
      </div>
    </div>

    <!-- TAB: AZKAR -->
    <div id="tab-azkar" class="tab-content">
      <div class="tab-header"><h2><i class="fas fa-moon"></i> ูุธุงู ุงูุฃุฐูุงุฑ</h2></div>
      <div class="settings-card">
        <div class="form-group">
          <label>๐ข ุฑูู ุงูุฃุฐูุงุฑ</label>
          <select id="azkar_channel" class="select-field">
            <option value="">-- ุจุฏูู --</option>
            <% guild.channels.forEach(ch => { %><option value="<%= ch.id %>" <%= settings.azkar_channel===ch.id?'selected':'' %>>#<%= ch.name %></option><% }) %>
          </select>
        </div>
        <div class="form-group">
          <label>โฑ๏ธ ูู ูู ุฏูููุฉุ</label>
          <input type="number" id="azkar_interval" value="<%= settings.azkar_interval %>" min="10" max="1440" class="input-field">
        </div>
        <div class="toggle-item">
          <div class="toggle-info">
            <span class="toggle-icon">๐ฟ</span>
            <div><strong>ุชูุนูู ุงูุฃุฐูุงุฑ ุงูุชููุงุฆูุฉ</strong></div>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="azkar_enabled" <%= settings.azkar_enabled?'checked':'' %>>
            <span class="toggle-slider"></span>
          </label>
        </div>
        <button onclick="saveSection('azkar',{azkar_channel:document.getElementById('azkar_channel').value,azkar_interval:document.getElementById('azkar_interval').value,azkar_enabled:document.getElementById('azkar_enabled').checked})" class="btn-save mt-4">๐พ ุญูุธ</button>
      </div>
    </div>

    <!-- TAB: TICKET -->
    <div id="tab-ticket" class="tab-content">
      <div class="tab-header"><h2><i class="fas fa-ticket-alt"></i> ูุธุงู ุงูุชูุชุงุช</h2></div>

      <div class="settings-card">
        <h3>๐ซ ุฅุนุฏุงุฏ ุงูุชูุช</h3>
        <p style="color:#aaa;margin-bottom:1rem">ูุฅูุดุงุก ูุธุงู ุงูุชูุช ุงุณุชุฎุฏู ุฃูุฑ <code>/setup-ticket</code> ูู ุงูุณูุฑูุฑ ูุจุงุดุฑุฉ</p>
        <div class="form-group">
          <label>๐ ุฑูู ุณุฌู ุงูุชูุช (Log Room)</label>
          <select id="ticket_log" class="select-field">
            <option value="">-- ุจุฏูู --</option>
            <% guild.channels.forEach(ch => { %><option value="<%= ch.id %>" <%= settings.ticket_log === ch.id ? 'selected' : '' %>>#<%= ch.name %></option><% }) %>
          </select>
        </div>
        <button onclick="saveSection('ticket',{ticket_log:document.getElementById('ticket_log').value})" class="btn-save">๐พ ุญูุธ</button>
      </div>

      <div class="settings-card">
        <h3>๐ ุฃูุงูุฑ ุงูุชูุช</h3>
        <div class="cmds-grid">
          <div class="cmd-item"><code>/setup-ticket</code><span>ุฅุนุฏุงุฏ ูุธุงู ุงูุชูุช ุงูุฑุฆูุณู</span></div>
          <div class="cmd-item"><code>/add-ticket-button</code><span>ุฅุถุงูุฉ ุฒุฑ ุชูุช ุฅุถุงูู</span></div>
          <div class="cmd-item"><code>/to-select</code><span>ุชุญููู ุงูุฃุฒุฑุงุฑ ููุงุฆูุฉ ููุณุฏูุฉ</span></div>
          <div class="cmd-item"><code>/set-ticket-log</code><span>ุชุญุฏูุฏ ุฑูู ุณุฌู ุงูุชูุช</span></div>
          <div class="cmd-item"><code>/add-user</code><span>ุฅุถุงูุฉ ูุณุชุฎุฏู ููุชูุช</span></div>
          <div class="cmd-item"><code>/remove-user</code><span>ุฅุฒุงูุฉ ูุณุชุฎุฏู ูู ุงูุชูุช</span></div>
          <div class="cmd-item"><code>/close</code><span>ุฅุบูุงู ุงูุชูุช</span></div>
          <div class="cmd-item"><code>/delete</code><span>ุญุฐู ุงูุชูุช ููุงุฆูุงู</span></div>
          <div class="cmd-item"><code>/rename</code><span>ุชุบููุฑ ุงุณู ุงูุชูุช</span></div>
        </div>
      </div>
    </div>

    <!-- TAB: PREMIUM -->
    <div id="tab-premium" class="tab-content">
      <div class="tab-header"><h2><i class="fas fa-crown"></i> Premium</h2></div>
      <% if (settings.premium) { %>
        <div class="premium-active-card">
          <div class="premium-crown">๐</div>
          <h3>ูุฐุง ุงูุณูุฑูุฑ Premium!</h3>
          <p>ุชูุชุน ุจุฌููุน ุงูููุฒุงุช ุงูุญุตุฑูุฉ ุจุฏูู ูููุฏ</p>
          <div class="premium-features">
            <div class="premium-feature-item">โ ุจุงูุฏ/ููู ูู ุงูุฏุงุดุจูุฑุฏ</div>
            <div class="premium-feature-item">โ ุฅุฏุงุฑุฉ ูุชูุฏูุฉ</div>
            <div class="premium-feature-item">โ ุฃููููุฉ ุงูุฏุนู</div>
          </div>
        </div>
      <% } else { %>
        <div class="premium-upgrade-card">
          <div class="premium-crown">๐</div>
          <h3>ุงุญุตู ุนูู Premium</h3>
          <div class="premium-features">
            <div class="premium-feature-item">๐จ ุจุงูุฏ/ููู ูู ุงูุฏุงุดุจูุฑุฏ</div>
            <div class="premium-feature-item">๐ ุฅุญุตุงุฆูุงุช ูุชูุฏูุฉ</div>
            <div class="premium-feature-item">โก ุฃููููุฉ ุงูุฏุนู</div>
          </div>
          <a href="https://discord.gg/HC8V8cPF4" target="_blank" class="btn-premium-upgrade">ุชูุงุตู ูุนูุง ููุญุตูู ุนูู Premium</a>
        </div>
      <% } %>
    </div>
  </main>
</div>

<script>
const GUILD_ID = '<%= guild.id %>';
const PREFIX = '<%= settings.prefix %>';

function showTab(tab, el) {
  document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
  const tabEl = document.getElementById('tab-' + tab);
  if (tabEl) tabEl.classList.add('active');
  if (el) el.classList.add('active');
}
function showToast(msg, type = 'success') {
  const toast = document.getElementById('toast');
  toast.textContent = msg;
  toast.className = 'toast ' + type;
  setTimeout(() => toast.className = 'toast hidden', 3500);
}

// ====== ุญูุธ 10 ุฃุณูุงุก ููู ุฃูุฑ ======
async function saveAliases(keys) {
  const data = {};
  keys.forEach(k => {
    for (let i = 1; i <= 10; i++) {
      const val = document.getElementById(`sc_${k}_${i}`)?.value?.trim();
      data[`sc_${k}_${i}`] = val || '';
    }
  });
  await saveSection('shortcuts', data);
}

// ====== ุฃูุงูุฑ ูุฎุตุตุฉ ======
async function addCustomCmd() {
  const cmd   = document.getElementById('custom_cmd').value.trim().replace(/\s+/g,'');
  const reply = document.getElementById('custom_reply').value.trim();
  if (!cmd || !reply) return showToast('โ ุฃุฏุฎู ุงุณู ุงูุฃูุฑ ูุงูุฑุฏ', 'error');
  const res = await saveSection('custom_cmds', { action: 'add', cmd, reply });
  if (res?.success) {
    document.getElementById('custom_cmd').value = '';
    document.getElementById('custom_reply').value = '';
    const list = document.getElementById('custom-cmds-list');
    const empty = list.querySelector('.empty-text');
    if (empty) empty.remove();
    const el = document.createElement('div');
    el.className = 'reply-item';
    el.id = 'cc_' + cmd;
    el.innerHTML = `<div class="reply-info"><span class="reply-word">${PREFIX}${cmd}</span><span class="reply-arrow">โ</span><span class="reply-text">${reply}</span></div><button onclick="removeCustomCmd('${cmd}')" class="btn-sm-danger">๐๏ธ</button>`;
    list.appendChild(el);
  }
}

async function removeCustomCmd(cmd) {
  const res = await saveSection('custom_cmds', { action: 'remove', cmd });
  if (res?.success) {
    const el = document.getElementById('cc_' + cmd);
    if (el) el.remove();
  }
}

async function saveSection(section, data) {
  try {
    const res = await fetch(`/api/guild/${GUILD_ID}/settings`, {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({ section, data })
    });
    const result = await res.json();
    if (result.success) showToast(result.message, 'success');
    else showToast(result.error || 'ุฎุทุฃ!', 'error');
  } catch (e) { showToast('ุฎุทุฃ ูู ุงูุงุชุตุงู!', 'error'); }
}

function saveProtection() {
  saveSection('protection', {
    anti_server_edit: document.getElementById('anti_server_edit').checked,
    anti_channel_edit: document.getElementById('anti_channel_edit').checked,
    anti_channel_create: document.getElementById('anti_channel_create').checked,
    anti_role_create: document.getElementById('anti_role_create').checked,
    anti_role_edit: document.getElementById('anti_role_edit').checked,
    anti_kick: document.getElementById('anti_kick').checked,
    anti_bots: document.getElementById('anti_bots').checked,
    anti_ban: document.getElementById('anti_ban').checked,
    anti_webhook: document.getElementById('anti_webhook').checked,
    protect_log: document.getElementById('protect_log').value
  });
}

function saveLogs() {
  const logKeys = ['messagedelete','messageupdate','rolecreate','roledelete','rolegive','roleremove','channelcreate','channeldelete','banadd','bandelete','kickadd','botadd'];
  const data = {};
  logKeys.forEach(k => { const el = document.getElementById('log_'+k); if(el) data['log_'+k] = el.value; });
  saveSection('logs', data);
}

async function doAction(action, data) {
  try {
    const res = await fetch(`/api/guild/${GUILD_ID}/action`, {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({ action, data })
    });
    const result = await res.json();
    if (result.success) showToast(result.message, 'success');
    else showToast(result.error || 'ุฎุทุฃ!', 'error');
  } catch (e) { showToast('ุฎุทุฃ ูู ุงูุงุชุตุงู!', 'error'); }
}

// Auto-Reply
async function addAutoReply() {
  const word = document.getElementById('ar_word').value.trim();
  const reply = document.getElementById('ar_reply').value.trim();
  if (!word || !reply) return showToast('ุฃุฏุฎู ุงููููุฉ ูุงูุฑุฏ!', 'error');

  try {
    const res = await fetch(`/api/guild/${GUILD_ID}/settings`, {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({ section: 'autoreply', data: { action: 'add', word, reply } })
    });
    const result = await res.json();
    if (result.success) {
      showToast('โ ุชู ุฅุถุงูุฉ ุงูุฑุฏ ุงูุชููุงุฆู!', 'success');
      // Add to list UI
      const list = document.getElementById('replies-list');
      const emptyText = list.querySelector('.empty-text');
      if (emptyText) emptyText.remove();
      const div = document.createElement('div');
      div.className = 'reply-item';
      div.id = 'reply-' + word;
      div.innerHTML = `<div class="reply-info"><span class="reply-word">๐ค "${word}"</span><span class="reply-arrow">โ</span><span class="reply-text">${reply}</span></div><button onclick="removeAutoReply('${word.replace(/'/g, "\\'")}')" class="btn-sm-danger">๐๏ธ</button>`;
      list.appendChild(div);
      const count = document.getElementById('reply-count');
      count.textContent = parseInt(count.textContent) + 1;
      document.getElementById('ar_word').value = '';
      document.getElementById('ar_reply').value = '';
    } else {
      showToast(result.error || 'ุฎุทุฃ!', 'error');
    }
  } catch(e) { showToast('ุฎุทุฃ ูู ุงูุงุชุตุงู!', 'error'); }
}

async function removeAutoReply(word) {
  try {
    const res = await fetch(`/api/guild/${GUILD_ID}/settings`, {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({ section: 'autoreply', data: { action: 'remove', word } })
    });
    const result = await res.json();
    if (result.success) {
      showToast('โ ุชู ุญุฐู ุงูุฑุฏ!', 'success');
      const el = document.getElementById('reply-' + word);
      if (el) el.remove();
      const count = document.getElementById('reply-count');
      count.textContent = Math.max(0, parseInt(count.textContent) - 1);
    } else { showToast(result.error || 'ุฎุทุฃ!', 'error'); }
  } catch(e) { showToast('ุฎุทุฃ ูู ุงูุงุชุตุงู!', 'error'); }
}
</script>
</body>
</html>
